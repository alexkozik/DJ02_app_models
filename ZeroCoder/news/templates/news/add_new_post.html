{% extends 'main/layout.html' %}

{% block title %}
	<title>Страница для добавления новостей</title>
{% endblock %}

{% block content %}
<!--<h1>Страница для добавления новостей</h1>
    <div>
	<h2>Форма для добавления новостей</h2>
        <form method="post" >
            <input type="text" placeholder="Заголовок новости"> <br>
            <input type="text" placeholder="Краткое описание новости"> <br>
            <textarea placeholder="Содержание новости"></textarea> <br>
            <input type="date"> <br>
            <input type="time"> <br>
            <button type="submit">Добавить новость</button>
        </form>
</div>-->

<body class="bg-light">

  <div class="container py-5">
    <h1 class="text-center mb-4">Страница для создания новостей</h1>

    <div class="card shadow-lg rounded-4">
      <div class="card-body p-5">
        <h2 class="mb-4 text-primary">Форма для добавления новостей</h2>

        <form method="post" class="needs-validation" novalidate>
            {% csrf_token %}
          <!-- Header -->
          <div class="mb-3">
            <!--<label for="header" class="form-label">Заголовок новости</label>
            <input type="text" class="form-control" id="header" name="header" placeholder="Введите заголовок новости" required>-->
            {{ form.title }}
            <div class="invalid-feedback">Пожалуйста, введите заголовок.</div>
          </div>

          <!-- Short Description -->
          <div class="mb-3">
<!--            <label for="shortDescription" class="form-label">Краткое описание новости</label>-->
<!--            <input type="text" class="form-control" id="shortDescription" name="shortDescription" placeholder="Введите краткое описание новости" required>-->
            {{ form.short_description }}
            <div class="invalid-feedback">Пожалуйста, введите краткое описание.</div>
          </div>

          <!-- Content -->
          <div class="mb-3">
<!--            <label for="content" class="form-label">Содержание новости</label>-->
<!--            <textarea class="form-control" id="content" name="content" rows="5" placeholder="Напишите полное содержание здесь ...." required></textarea>-->
            {{ form.text }}
            <div class="invalid-feedback">Пожалуйста, введите содержание</div>
          </div>

          <!-- Author -->
          <div class="mb-3">
            {{ form.author }}
<!--            <div class="invalid-feedback">Пожалуйста, введите содержание</div>-->
          </div>

          <!-- Date -->
          <div class="mb-3">
<!--            <label for="date" class="form-label">Дата публикации</label>-->
<!--            <input type="date" class="form-control" id="date" name="date" required>-->
                {{ form.pub_date_date }}
            <div class="invalid-feedback">Пожалуйста выберите дату</div>
          </div>

          <!-- Time -->
          <div class="mb-3">
<!--            <label for="time" class="form-label">Время публикации</label>-->
<!--            <input type="time" class="form-control" id="time" name="time" required>-->
            {{ form.pub_date_time }}
            <div class="invalid-feedback">Пожалуйста введите время</div>
          </div>

          <!-- Submit Button -->
          <button type="submit" class="btn btn-primary btn-lg w-100">Добавить</button>
        </form>
        <p>{{error}}</p>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  -->

  <!-- Set current date & time -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const dateInput = document.getElementById("date");
      const timeInput = document.getElementById("time");

      const now = new Date();

      // Format YYYY-MM-DD
      const yyyy = now.getFullYear();
      const mm = String(now.getMonth() + 1).padStart(2, "0");
      const dd = String(now.getDate()).padStart(2, "0");
      dateInput.value = `${yyyy}-${mm}-${dd}`;

      // Format HH:MM (24-hour)
      const hh = String(now.getHours()).padStart(2, "0");
      const min = String(now.getMinutes()).padStart(2, "0");
      timeInput.value = `${hh}:${min}`;
    });
  </script>

  <!-- Client-side validation -->
  <script>
    (() => {
      'use strict'
      const forms = document.querySelectorAll('.needs-validation')
      Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
    })()
  </script>
</body>
{% endblock %}